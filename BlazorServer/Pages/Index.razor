@page "/"
@using System.Diagnostics

<FileUpload @ref=@Instance FilesChanged="@OnFilesChanged" Multiple="true">

</FileUpload>



@code {
    private FileUpload Instance;


    protected override async Task OnAfterRenderAsync(bool firstRender)
    {

    }

    private async Task OnFilesChanged(IEnumerable<FrontEndFile> files){
        if (!files.Any())
        {
            return;
        }
        var file = files.First();
        var filePath = "C:\\Users\\Jaron\\Desktop\\test\\TEST__" + file.FileName;
        if (File.Exists(filePath))
        {
            File.Delete(filePath);
        }
        var before = DateTime.Now;
        var contents = await file.GetAllContents();
        var after = DateTime.Now;
        Debug.WriteLine(after - before);
        await File.WriteAllBytesAsync(filePath, contents);

        // using var fileStream = File.Create(filePath);
        // using var downloadStream = file.CreateStream();
        // await downloadStream.CopyToAsync(fileStream);
        // fileStream.Close();
    }
}